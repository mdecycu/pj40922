\chapter{有限元素法}
用於求解偏微分方程或積分方程組數值求解，將大型物理系統細分為更小、更簡單的部分，稱為有限元，通過在空間維度上進行特定的空間離散化簡化連續變量的複雜性，有限元素法通過最小化關聯的誤差函數，使用來自變異演算的變異方法來近似求，來實現用於複雜的工程結構或物理系統的行為和性能。\\

%---------------------第二章/基本概念及假設假定-------------------------%
\section{基本概念及假設假定}

1.有限元素:通常由三角形或者四邊形等形成結構的區域。\\

2.節點:每個元素的角落或中心點，用於連接元素之間的邊界條件和解決方程。\\

3.自由度: 節點上變量的個數，例如位移的節點自由度為3，表示單個節點擁有三個坐標方向的位移，又例如熱分析時節點自由度為1，表示某個節點處的溫度。\\

4.網格:由數個元素經由節點連接所組成，用以表示在需求解的區域上。\\

5.變形:系統在外力的影響下發生的形變，經過分析後計算每個元素的變形及變形之間的相互引響預測整得系統的變形及應力、各種參數的分布。\\

6.離散化:將物理系統或結構等連續變量通過計算轉換為數格元素的過程，目的在於減化數據，減少連續變量的複雜性，便於處理及分析。關於公式及步驟會因為模型或問題的類型不同而有不一樣的計算方式。\\

7.邊界條件:物理系統邊界上的約束和力，模擬實際問題中的條件及約束。\\

8.材料特性:物理系統(模型)的材料性質，不同的材料其中的參數各為不同(彈性模數、潽淞比、極限強度、屈服強度等)。\\

\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=16cm]{類神經網路架構}
\caption{\Large 類神經網路架構}\label{類神經網路架構}
\end{center}
\end{figure}
\newpage

\begin{figure}
\begin{center}
\includegraphics[width=16cm]{類神經網路架構}
\caption{\Large 類神經網路架構}
\label{類神經網路架構}
\end{center}
\end{figure}
\begin{itemize}
%=----------Sigmoid      Function----------=%
\item Sigmoid Function(圖.\ref{SigmoidFunction})：\\
$$\sigma(x)=\frac{1}{1+e^{-x}}$$

%=----------SigmoidPrime Function----------=%
$$\sigma^{'}(x)=\sigma(x)[1-\sigma(x)]$$
\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=16cm]{SigmoidFunction}
\caption{\Large SigmoidFunction}\label{SigmoidFunction}
\end{center}
\end{figure}
\\
%=----------Softmax Function----------=%
\item Softmax：\\
$$S(x)=\frac{e^{x_i}}{\sum^k_{j=1}e^{x_i}}$$
%=----------Relu Function----------=%
\item ReLU Function：\\
\end{itemize}
$$f(x)=max(0,x)$$
$$if , x<0 , f(x)=0$$
$$else f(x)=x$$

%=----------Faces of Reinforcement Learning---------------=%

強化學習涵蓋範圍(圖.\ref{各領域與機器學習應用範圍})：\\
 
%======需文字補充========%
\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=11cm]{Faces_of_Reinforcement_Learning}
\caption{\Large 各領域與機器學習應用範圍}
\label{各領域與機器學習應用範圍}
\end{center}
\end{figure}
%=--------The Flow of Reinforcement Learning------------=%.
\newpage
\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=12cm]{The_Flow_of_Reinforcement_Learning}
\caption{\Large 強化學習架構}
\label{RL structur}
\end{center}
\end{figure}
\newpage
\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=15cm]{The_entire_interaction_process}
\caption{\Large 整個互動過程}
\label{整個互動過程}
\end{center}
\end{figure}

 
%------------------圖片可共用----------------------%
\iffalse
\begin{figure}[hbt!]
\begin{center}
\includegraphics[scale=0.74]{ Reinforcement_Learning_interactions}
\caption{\Large Reinforcement Learning interactions}
\end{center}
\end{figure}
\fi
%=----Interactions with Reinforcement Learning------------=%


\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=15cm]{agent}
\caption{\Large agent}
\label{agent}
\end{center}
\end{figure}
%=----Agents------------=%
\begin{flushleft}
\end{flushleft}

%--------------------------第二章/網格劃分基本原則--------------------------%
\section{網格劃分基本原則}
1. 網格數量:將決定計算經度及規模大小，一般狀況中，網格數量增加計算精度也會跟著提升，但伴隨而來的是更大的計算量，所以在制定網格大小時應權衡兩個因素。\\

2. 網格疏密:在某些變化梯度較大的部位(應力集中處)，需要大密集的網格，密集往個將更好反映數據變化，反之變化梯度較小的部位則用較稀疏的網格，而不同單元之間的連接則採用特殊的過度單元或多點約束等方法連接，才能更好的分配資源，兼顧計算量何計算精度。\\

3. 網格質量:指網格型狀的合理性，質量的好壞將直接影響計算精度，質量較差的除了造成局部的計算精度偏差甚至會直接終止計算，因此在重要部位時應該確保其擁有高品質的表現。\
如果網格都是由等邊三角形、正方形、正四面體、立方六面體等組成，則求解精度可以非常接近實際值，但這種只存在於理想狀態下，實際運用卻很難做到。\\

元素質量評價有幾個指標\\

1. 單元的邊長比、面積比及體積比，理想的邊長比為1，以正三角形、正四面體、正六面體為參考基準\\

2. 扭曲度:單元內部扭轉及面外的翹曲程度\\

3. 疏密過渡:應力梯度方向和橫向過渡情況，應力集中部分應較為密集，則反之\\

4. 節點、元素排部:合理的節點及元素有助於帶入方程式計算，可以提高求解效率，並且須注意消除重複的節點及元素\\


%--------------------------第二章/有限元計算公式--------------------------%
\section{有限元計算公式}
對於有限元素法代入模型的各種問題求解，以下有著幾種計算公式。\\
%
%---------------------{有限元素應力計算公式}---------------------%
\subsection{有限元素應力計算公式}
1. 對於三角形元素而言，其計算方法如下\\
\[
\begin{aligned}
\sigma x=\left( \dfrac{1}{\Delta }\right) \times \left[ \sigma _{1}\times \left( y_{2}-y_{3}\right) +\sigma _{2}\times \left( y_{3}-y_{1}\right) +\sigma _{3}\times \left( y_{1}-y_{2}\right) \right]\\
\sigma y=\left( \dfrac{1}{\Delta }\right) \times \left[ \sigma _{1}\times \left( x_{3}-x_{2}\right) +\sigma _{2}\times \left( x_{1}-x_{3}\right) +\sigma _{3}\times \left( x_{2}-x_{1}\right) \right]\\
\tau xy=\left( \dfrac{1}{\Delta }\right) \times \left[ \tau _{1}\times \left( x_{3}-x_{2}\right) +\tau _{2}\times \left( x_{1}-x_{3}\right) +\tau _{3}\times \left( x_{2}-x_{1}\right) \right]\\
\end{aligned}
\]
其中，σx, σy, τxy 分別表示在 x, y 方向上的正應力和剪應力，σ1, σ2, σ3 表示每個節點上的應力，τ1, τ2, τ3 表示每個節點上的剪應力，Δ 表示三角形單元的面積。\\

2. 對於四邊形元素而言，其計算方法如下\\
\[
\begin{aligned}
\sigma _{x}=\left( \dfrac{1}{4t}\right) \times \left[ \sigma _{1}\times \left( y_{4}-y_{2}\right) +\sigma _{2}\times \left( y_{1}-y_{3}\right) +\sigma _{3}\times \left( y_{2}-y_{4}\right) +\sigma _{4}\times \left( y_{3}-y_{1}\right) \right]\\
\sigma _{y}=\left( \dfrac{1}{4t}\right) \times \left[ \sigma _{1}\times \left( x_{2}-x_{4}\right) +\sigma _{2}\times \left( x_{3}-x_{1}\right) +\sigma _{3}\times \left( x_{4}-x_{2}\right) +\sigma _{4}\times \left( x_{1}-x_{4}\right) \right]\\
\tau xy=\left( \dfrac{1}{4t}\right) \times \left[ \tau _{1}\times \left( x_{2}-x_{4}\right) +\tau _{2}\times \left( x_{3}-x_{1}\right) +\tau 3\times \left( x_{4}-x_{2}\right) +\tau 4\times \left( x_{1}-x_{3}\right) \right]\\
\end{aligned}
\]
其中，σx, σy, τxy 分別表示在 x, y 方向上的正應力和剪應力，σ1, σ2, σ3, σ4 表示每個節點上的應力，τ1, τ2, τ3, τ4 表示每個節點上的剪應力，t 表示四邊形單元的厚度。\\

%-------------------{有限元素應力計算公式}------------------------%
\subsection{有限元素應力計算公式}
1. 對於三角形元素而言，其計算方法如下\\
\[
\begin{aligned}
\varepsilon x=\left( \dfrac{1}{\Delta }\right) \times \left[ \varepsilon 1\times \left( y_{2}-y_{3}\right) +\varepsilon 2\times \left( y_{3}-y_{1}\right) +\varepsilon 3\times \left( y_{1}-y_{2}\right) \right]\\
\varepsilon y=\left( \dfrac{1}{\Delta }\right) \times \left[ \varepsilon 1\times \left( x_{3}-x_{2}\right) +\varepsilon 2\times \left( x_{1}-x_{3}\right) +\varepsilon 3\times \left( x_{2}-x_{1}\right) \right]\\
\gamma xy=\left( \dfrac{1}{\Delta }\right) \times \left[ \gamma _{1}\times \left( x_{3}-x_{2}\right) +\gamma _{2}\times \left( x_{1}-x_{3}\right) +r_{3}\times \left( x_{2}-x_{1}\right) \right]\\
\end{aligned}
\]
其中，εx, εy 分別表示在 x, y 方向上的應變，γxy 表示剪應變，ε1, ε2, ε3 分別表示每個節點上的應變，γ1, γ2, γ3 表示每個節點上的剪應變，Δ 表示三角形單元的面積。\\

2. 對於四邊形元素而言，其計算方法如下\\
\[
\begin{aligned}
\varepsilon _{x}=\left( \dfrac{1}{4t}\right) \times \left[ \varepsilon _{1}\times \left( y_{4}-y_{2}\right) +\varepsilon _{2}\times \left( y_{1}-y_{3}\right) +\varepsilon _{3}\times \left( y_{2}-y_{4}\right) +\varepsilon _{4}\times \left( y_{3}-y_{1}\right) \right]\\
\varepsilon _{y}=\left( \dfrac{1}{4t}\right) \times \left[ \varepsilon _{1}\times \left( x_{2}-x_{4}\right) +\varepsilon _{2}\times \left( x_{3}-x_{1}\right) +\varepsilon _{3}\times \left( x_{4}-x_{2}\right) +\varepsilon _{4}\times \left( x_{1}-x_{4}\right) \right]\\
\gamma xy=\left( \dfrac{1}{4t}\right) \times \left[ \gamma _{1}\times \left( x_{2}-x_{4}\right) +\gamma _{2}\times \left( x_{3}-x_{1}\right) +\gamma 3\times \left( x_{4}-x_{2}\right) +\gamma 4\times \left( x_{1}-x_{3}\right) \right]\\
\end{aligned}
\]
其中，εx, εy 分別表示在 x, y 方向上的應變，γxy 表示剪應變，ε1, ε2, ε3, ε4 分別表示每個節點上的應變，γ1, γ2, γ3, γ4 表示每個節點上的剪應變，t 表示四邊形單元的厚度。\\

%-----------有限元素動力學分析公式-------------%
\subsection{有限元素動力學分析公式}
1. 結構的運動方程\
在有限元素動力學分析中，結構的運動方程通常採用以下形式表示：\\
\[
\begin{aligned}
\left[ M\right] \times \left\{ u''\right\} +\left[ C\right] \times \left\{ u'\right\} +\left[ K\right] \times \left\{ u\right\} =\left\{ F\left( t\right) \right\}\\
\end{aligned}
\]
其中，[M]、[C] 和 [K] 分別表示結構的質量、阻尼和剛度矩陣，{¨u}、{˙u} 和 {u} 分別表示結構的加速度、速度和位移矢量，{F(t)} 表示結構受到的外部激勵矢量。\\

2. 求解運動方程\
通過對運動方程進行離散化處理，可以得到結構的位移、速度和加速度的數值解。通常採用時間步進法求解運動方程，其中最常用的是 Newmark-β 方法，其求解公式如下：\\
\[
\begin{aligned}
\left\{ u\left( t+\Delta t\right) \right\} =\left\{ u\left( t\right) \right\} +\left\{ u'\left( t\right) \right\} \Delta t+\left( \dfrac{1}{2}-\beta \right) \times \left\{ u''\left( t\right) \right\} \Delta t^{2}+\beta \left\{ u''\left( t+\Delta t\right) \right\} \Delta t^{2}\\
\left\{ u'\left( t+\Delta t\right) \right\} =\left\{ u'\left( t\right) \right\} +\left( 1-\gamma \right) \times \left\{ u''\left( t\right) \right\} \Delta t+\gamma \left\{ u''\left( t+\Delta t\right) \right\} \Delta t\\
\end{aligned}
\]
其中，β 和 γ 是時間步進法的參數，其取值需要根據求解的精度和計算效率進行權衡。\\

3. 應力計算公式\
在求解結構動態響應的過程中，通常需要計算結構內部的應力分佈情況。對於有限元素動力學分析而言，常用的應力計算公式是根據結構位移和應變之間的關係推導而來的。具體來說，可以採用以下公式進行應力計算：\\
\[
\begin{aligned}
\left\{ \sigma \right\} =\left[ D\right] \times \left\{ \varepsilon \right\}
\end{aligned}
\]
其中，{σ} 和 {ε} 分別表示應力和應變矢量，[D] 表示材料的彈性剛度矩陣，其數值可以根據材料的力學性質進行計算。\\

%-----------有限元素疲劳分析公式------------%
\subsection{有限元素疲勞分析公式}
1. 疲勞壽命計算公式\
在有限元素疲勞分析中，常用的疲勞壽命計算公式是基於線性累積損傷理論的公式，其表示形式如下：\\
\[
\begin{aligned}
N=\dfrac{1}{\left( \Delta ^{\sigma }/2S\right) ^{m}}\\
\end{aligned}
\]
其中，N 表示疲勞壽命，Δσ 表示應力幅值，S 表示材料的疲勞極限，m 是材料的疲勞指數，其數值可以根據材料的力學性質進行計算。\\

2. 應力計算公式\
在有限元素疲勞分析中，需要對結構的應力分佈進行計算。常用的應力計算公式是基於虛功原理推導而來的，其表示形式如下：\\
\[
\begin{aligned}
\int \left\{ \sigma \right\} T\left\{ \delta \varepsilon \right\} dV=\int \left\{ f\right\} T\left\{ \delta u\right\} dV+\int \left\{ T\right\} T\left\{ \delta u\right\} dS\\
\end{aligned}
\]
其中，{σ} 和 {ε} 分別表示應力和應變矢量，{f} 表示結構受到的外部載荷矢量，{u} 表示結構的位移矢量，{T} 表示結構的邊界條件。\\

3. 疲勞壽命修正公式\
在實際應用中，疲勞壽命計算公式需要考慮多種因素的影響，如應力比、材料強度和載荷歷史等。常用的疲勞壽命修正公式包括 Goodman、Soderberg、Walker 和 Morrow 等，其表示形式可以根據具體的應用要求進行選擇。\\

%=========表格=========%
\begin{center}
\begin{tabular}[c]{ccc}    
%\multicolumn{1}{r}{MRP}
 MRP & $\longleftrightarrow$ & MDP\\
\hline
$P^{\pi}(s's)$ & = & $\sum_{a\in A}\pi (a|s)P(s'|s, a)$\\
$P^{\pi}(s)$ & = & $\sum_{a\in A}\pi (a|s)P(s, a)$\\
\includegraphics[height=3cm]{MRP}&&\includegraphics[height=3cm]{MDP}\\
\hline
\end{tabular}
\end{center}
\hspace{15pt}
 
state value function(狀態值方程式)$v^{\pi}(s)$\\
$$v^{\pi}(s) = \mathbb{E}[G_t|s_t=s]$$
$$= \mathbb{E}[R_{t+1}+\gamma v^{\pi}(s_{t+1})|s_t=s]$$
$$= \sum_{a\in A}\pi (a|s)q^{\pi}(s, a)$$
\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=8cm]{s_to _s}
\caption{$v^{\pi}$程序圖}
\label{fig.s_to_s}
\end{center}
\end{figure}
$$v^{\pi}(s) = \sum_{a\in A}\pi (a|s)(R(s, a)+\gamma \sum_{s'\in s}P(s'|s, a)v^{\pi}(s'))$$
\newpage
state value function(狀態值方程式)$q^{\pi}(s)$
$$v^{\pi}(s) = \mathbb{E}[G_t|s_t=s]$$
$$= \mathbb{E}[R_{t+1}+\gamma v^{\pi}(s_{t+1})|s_t=s]$$
$$= \sum_{a\in A}\pi (a|s)q^{\pi}(s, a)$$
\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=8cm]{Q_pi function}
\caption{$q^{\pi}$程序圖}
\label{fig.q_pi}
\end{center}
\end{figure}
$$q^\pi(s, a)=R(s, a)+\gamma\sum_{s'\in S}P(s'|s, a)\sum_{a'\in A}\pi(a'|s')q^{\pi}(s', a')$$
\newpage
%-----------------------第2章/分析步驟--------------------------%
\section{分析步驟}

1.建立幾何模型:將需求解的問題繪製成幾何模型，以透過二維或三維帶入\\

2.離散化:將模型分成數個元素\\

3.導入有限元方程:對每個需求解的模型或問題不相同，根據力學性質或物理方程帶入相應的關西式(應力、應變、變形、熱傳等)\\

4.裝配方程組:將所有單元方程組裝成一個大的線性方程，對問題進行代數求解\\

5.求解方程組:透過線性方程，得到節點處的位移及負載等相關訊息\\

6.後處理:對求解結果進行誤差分析及驗證\\
\newpage

\begin{figure}[hbt!]
\begin{center}
\includegraphics[width=15cm]{policy gradient原理}
\caption{\Large Policy Gradient原理}
\label{Policy Gradient原理}
\end{center}
\end{figure}
\newpage
